#summary Documentation to build and run ITK code from Matlab using Gerardus
#labels Phase-Deploy

= Introduction =

This page documents `itk_imfilter()` and `itk_pstransform()`, MEX functions provided by Gerardus that allow to run ITK code from Matlab.

 * *[http://code.google.com/p/gerardus/source/browse/trunk/matlab/ItkToolbox/ItkImFilter.cpp itk_imfilter()]:* Run ITK filters on a 2D or 3D image (This is similar to [http://matitk.cs.sfu.ca/ MATITK])
 * *[http://code.google.com/p/gerardus/source/browse/trunk/matlab/ItkToolbox/ItkPSTransform.cpp itk_pstransform()]:* ITK warps between 3D point sets with a known correspondence (thin-plate spline, elastic, B-spline, etc)


= Requirements =

 * [http://subversion.apache.org/ Subversion client]
  # Download and install the subversion package appropriate for your operating system
  * Note for Linux users: Subversion is probably packaged for your distribution. For example, Ubuntu users can install it doing
{{{
$ sudo apt-get install subversion
}}}
  * Note for Windows users: A popular choice for Windows users is the [http://tortoisesvn.net/downloads.html TortoiseSVN client]
  * Note for other users: See the [http://subversion.apache.org/packages.html subversion package download page] for more options
 * [http://www.cmake.org/ CMake]
  # Download and install CMake for your system (Linux, Windows, MacOS X, etc). 
  * Note for Linux users: CMake is probably packaged for your distribution. For example, Ubuntu users can install it doing
{{{
$ sudo apt-get install cmake
}}}
  * Note for Windows users: Download and run the Win32 Installer from the [http://www.cmake.org/cmake/resources/software.html CMake downloads page]
  * Note for other users: See the [http://www.cmake.org/cmake/resources/software.html CMake resources page] for more options
 * [http://www.itk.org/itkindex.html Insight Toolkit]
  # [http://www.itk.org/ITK/resources/software.html Download the Insight Toolkit (ITK)]
  # Build and install ITK using CMake (see the [http://www.itk.org/ItkSoftwareGuide.pdf ITK Software Guide] for details)
  * Note for everyone: You need to set the following variables in your CMake build of ITK
{{{
CMAKE_BUILD_TYPE   Release
ITK_USE_REVIEW     ON
}}}
   * Linux users can do this with flags when running cmake, e.g.
{{{
$ cmake -DITK_USE_REVIEW=ON -DCMAKE_BUILD_TYPE=Release ..
}}}
   * Windows users can do this using the "Add Entry" button in the CMake GUI
  * Note for Windows users: Click on "Start" -> "My computer" -> "View system information", and in the "Advanced" tab click on "Environment Variables". Select the System variable `Path`, and click "Edit". Add the path to the `ITKCOMMON.DLL` library, e.g. "C:\Program Files\ITK\bin"
 * [http://www.mathworks.com/products/matlab/ Matlab]
  # Matlab has its own installer for each operating system (Linux, Windows, MacOS X, etc)
  * Note for Windows users: Similarly to the previous step, add to the `Path` environment variable the path to your Matlab `LIBMEX.DLL` and `LIBMX.DLL` libraries, e.g. "C:\Program Files\MATLAB\R2010b\bin\win32"
 * [http://code.google.com/p/gerardus/ Gerardus]
  # Check out the Gerardus project code
  * Note for Linux users: You can check out the latest version of the code from the command line doing
{{{
$ svn co http://gerardus.googlecode.com/svn/trunk/ gerardus
}}}
  * Note for Windows users: If you are using a graphic interface like TortoiseSVN, choose "Checkout" from the menu options, and enter `http://gerardus.googlecode.com/svn/trunk/` as the repository's URL. Name the destination folder `gerardus`

= Build and install =

== Linux users ==

 # Run from the command line the following code. If everything works, this will create and install the MEX files `itk_pstransform.mexa64` and `itk_imfilter.mexa64` (for a 64-bit architecture, 32-bit architectures give another extension to the files) to directory `gerardus/matlab/ItkToolkit`
{{{
$ cd gerardus/matlab
$ mkdir bin
$ cd bin
$ cmake ..
$ make
$ make install
}}}
 # Add `gerardus/matlab/ItkToolkit` to the Matlab path

== Windows users ==

 # Open file `gerardus\CMakeLists.txt` with your CMake program
 # Click on the "Configure" button. Specify the generator for this project (the one I have tested is "Visual Studio 10" with "Use default native compilers")
 # Click on the "Generate" button
 # Open file `gerardus\matlab\bin\GERARDUS_MATLAB.sln` with your development environment (e.g. Visual Studio 10)
 # Select "Build -> Build Solution" from the menu.
 # In the "Solution Explorer", right click on "INSTALL" and select "Build". This will install the DLLs that correspond to the compiled MEX files